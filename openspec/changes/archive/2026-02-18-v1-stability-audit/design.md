# V1 稳定性审计 - 技术方案

## 审计方法

使用现有的 2 个黄金测试向量（wujikey_v1_vector_1.json 和 wujikey_v1_vector_2.json）作为 V1 版本的稳定性基准。黄金向量包含完整的中间状态数据，覆盖多语言输入和跨半球地理坐标。

## 关键决策

### 1. CI/CD 强制回归测试
在 CI/CD 流程中强制执行黄金向量回归测试，任何测试失败都阻止代码合并。这防止无意的代码更改破坏向后兼容性。

### 2. 依赖库版本锁定
明确锁定 Swift-Sodium 0.9.1 和 F9Grid 1.1.0。升级前必须在隔离环境中验证黄金向量测试 100% 通过。

### 3. 分层测试架构
- **回归测试层**：黄金向量端到端验证（最高优先级）
- **单元测试层**：每个算法模块独立测试（快速反馈）
- **集成测试层**：完整数据转换流程验证

## 验证范围

### 7 个核心算法
文本归一化、BLAKE2b-128 盐生成、F9Grid 地理编码、记忆标签处理、Argon2id 密钥派生、BIP39 助记词生成、XChaCha20-Poly1305 加密

### 加密备份机制
验证记忆容错机制的 10 个独立加密块完整性，确保任意 3 个地点都能恢复助记词。

## 实施步骤

1. **审计现有实现** - 验证 7 个核心算法与黄金向量的一致性
2. **补充单元测试** - 为缺失的边界情况添加测试
3. **集成 CI/CD** - 强制执行回归测试
4. **文档化风险点** - 记录依赖升级路径和平台差异处理
